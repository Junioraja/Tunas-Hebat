<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jurnal Makan Sehat - TunasHebat</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['"Plus Jakarta Sans"', 'sans-serif'] },
                    colors: { 
                        brand: { 50: '#f0f9ff', 100: '#e0f2fe', 500: '#0ea5e9', 600: '#0284c7' },
                        sea: { 300: '#7dd3fc', 500: '#0ea5e9', 700: '#0369a1' }
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'float-delayed': 'float 7s ease-in-out infinite 2s',
                        'jump-fish': 'jumpFish 5s ease-in-out infinite',
                        'wave': 'wave 3s ease-in-out infinite alternate',
                    },
                    keyframes: {
                        float: { '0%, 100%': { transform: 'translateY(0) rotate(0deg)' }, '50%': { transform: 'translateY(-15px) rotate(5deg)' } },
                        jumpFish: {
                            '0%, 100%': { transform: 'translate(0, 100px) rotate(0deg)', opacity: '0' },
                            '40%': { opacity: '1' },
                            '50%': { transform: 'translate(-50px, -150px) rotate(-45deg)', opacity: '1' },
                            '60%': { opacity: '1' },
                            '100%': { transform: 'translate(-150px, 100px) rotate(-90deg)', opacity: '0' }
                        },
                        wave: { '0%': { transform: 'translateY(0)' }, '100%': { transform: 'translateY(10px)' } }
                    }
                }
            }
        }
    </script>

    <style>
        .food-card { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .food-card.active {
            border-color: #0ea5e9;
            background-color: #f0f9ff;
            box-shadow: 0 4px 6px -1px rgba(14, 165, 233, 0.1);
        }
        .food-card.active .check-circle {
            background-color: #0ea5e9;
            border-color: #0ea5e9;
            color: white;
        }
        .input-group {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-in-out, opacity 0.4s ease-in-out;
            opacity: 0;
        }
        .food-card.active .input-group {
            max-height: 100px;
            opacity: 1;
            margin-top: 12px;
        }

        /* Glass Fill Animation */
        .water-glass { transition: all 0.3s ease; position: relative; overflow: hidden; }
        .water-fill { 
            position: absolute; bottom: 0; left: 0; right: 0; 
            height: 0%; background: #38bdf8; 
            transition: height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 0;
        }
        .water-glass.filled .water-fill { height: 100%; }
        /* Fix z-index for icon inside glass so it stays visible */
        .water-glass i { position: relative; z-index: 10; transition: color 0.3s; }
        .water-glass.filled i { color: white; }
    </style>
</head>
<body class="bg-gradient-to-b from-sky-300 via-sky-200 to-sea-300 min-h-screen relative overflow-x-hidden font-sans text-slate-700">

    <!-- DEKORASI GANTUNG (Sayur & Buah) - DITAMBAHKAN pointer-events-none AGAR TIDAK MENGHALANGI KLIK -->
    <div class="absolute top-20 left-10 opacity-60 animate-float z-0 text-white drop-shadow-md pointer-events-none">
        <i class="ph ph-carrot text-8xl text-orange-400"></i>
    </div>
    <div class="absolute top-32 right-12 opacity-60 animate-float-delayed z-0 text-white drop-shadow-md pointer-events-none">
        <i class="ph ph-apple text-7xl text-red-400"></i>
    </div>
    <!-- Broccoli ini sebelumnya menutupi tombol tengah -->
    <div class="absolute top-1/3 left-1/2 opacity-40 animate-float z-0 text-white drop-shadow-md pointer-events-none">
        <i class="ph ph-broccoli text-5xl text-green-400"></i>
    </div>

    <!-- NAVBAR -->
    <nav class="p-6 flex items-center gap-4 relative z-30">
        <button onclick="window.location.href='dashboard.html'" class="w-10 h-10 bg-white/30 backdrop-blur-md rounded-xl flex items-center justify-center text-white hover:bg-white/50 transition border border-white/40 shadow-sm cursor-pointer">
            <i class="ph ph-arrow-left text-xl font-bold"></i>
        </button>
        <div class="text-white">
            <h1 class="font-bold text-lg drop-shadow-md">Jurnal Gizi</h1>
            <p class="text-brand-100 text-xs font-medium">Nutrisi seimbang, tubuh kuat!</p>
        </div>
    </nav>

    <!-- MAIN MENU (PILIH WAKTU MAKAN) -->
    <!-- Z-INDEX DINAIKKAN KE 20 AGAR LEBIH TINGGI DARI DEKORASI -->
    <main class="px-4 pb-48 relative z-20 w-full max-w-xl mx-auto mt-4">
        
        <div class="text-center mb-8">
            <h2 class="text-2xl font-bold text-white drop-shadow-md mb-2">Waktu Makan Apa Sekarang?</h2>
            <p class="text-sky-100 text-sm font-medium">Catat setiap sesi makanmu.</p>
        </div>

        <div class="grid grid-cols-2 gap-4">
            <!-- Makan Pagi -->
            <button onclick="openMealModal('Makan Pagi')" class="bg-white/80 backdrop-blur-md p-6 rounded-3xl border border-white/50 hover:scale-105 transition-transform shadow-lg group cursor-pointer relative z-20">
                <div class="w-14 h-14 bg-yellow-100 rounded-2xl flex items-center justify-center text-yellow-500 text-3xl mb-4 mx-auto group-hover:bg-yellow-500 group-hover:text-white transition-colors">
                    <i class="ph ph-sun-horizon"></i>
                </div>
                <h3 class="font-bold text-slate-700 text-lg">Pagi</h3>
                <p class="text-xs text-slate-400">Sarapan</p>
            </button>

            <!-- Makan Siang -->
            <button onclick="openMealModal('Makan Siang')" class="bg-white/80 backdrop-blur-md p-6 rounded-3xl border border-white/50 hover:scale-105 transition-transform shadow-lg group cursor-pointer relative z-20">
                <div class="w-14 h-14 bg-orange-100 rounded-2xl flex items-center justify-center text-orange-500 text-3xl mb-4 mx-auto group-hover:bg-orange-500 group-hover:text-white transition-colors">
                    <i class="ph ph-sun"></i>
                </div>
                <h3 class="font-bold text-slate-700 text-lg">Siang</h3>
                <p class="text-xs text-slate-400">Energi Penuh</p>
            </button>

            <!-- Makan Malam -->
            <button onclick="openMealModal('Makan Malam')" class="bg-white/80 backdrop-blur-md p-6 rounded-3xl border border-white/50 hover:scale-105 transition-transform shadow-lg group cursor-pointer relative z-20">
                <div class="w-14 h-14 bg-indigo-100 rounded-2xl flex items-center justify-center text-indigo-500 text-3xl mb-4 mx-auto group-hover:bg-indigo-500 group-hover:text-white transition-colors">
                    <i class="ph ph-moon-stars"></i>
                </div>
                <h3 class="font-bold text-slate-700 text-lg">Malam</h3>
                <p class="text-xs text-slate-400">Istirahat</p>
            </button>

            <!-- Minum Air -->
            <button onclick="openWaterModal()" class="bg-white/80 backdrop-blur-md p-6 rounded-3xl border border-white/50 hover:scale-105 transition-transform shadow-lg group cursor-pointer relative z-20">
                <div class="w-14 h-14 bg-blue-100 rounded-2xl flex items-center justify-center text-blue-500 text-3xl mb-4 mx-auto group-hover:bg-blue-500 group-hover:text-white transition-colors">
                    <i class="ph ph-drop"></i>
                </div>
                <h3 class="font-bold text-slate-700 text-lg">Air Minum</h3>
                <p class="text-xs text-slate-400">Target 8 Gelas</p>
            </button>
        </div>

    </main>

    <!-- DEKORASI BAWAH (LAUT & IKAN) -->
    <div class="fixed bottom-0 w-full z-0 pointer-events-none">
        <!-- Ikan Melompat (Animation) -->
        <div class="absolute bottom-10 right-10 text-brand-600 animate-jump-fish z-10">
            <i class="ph ph-fish-simple-fill text-6xl drop-shadow-lg"></i>
        </div>

        <!-- SVG Laut / Ombak -->
        <svg class="w-full h-auto text-sea-300 animate-wave" viewBox="0 0 1440 320" xmlns="http://www.w3.org/2000/svg">
            <path fill="currentColor" fill-opacity="0.8" d="M0,192L48,197.3C96,203,192,213,288,229.3C384,245,480,267,576,250.7C672,235,768,181,864,181.3C960,181,1056,235,1152,234.7C1248,235,1344,181,1392,154.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
        </svg>
        <svg class="absolute bottom-0 w-full h-auto text-sea-500 animate-wave" style="animation-delay: -1s;" viewBox="0 0 1440 320" xmlns="http://www.w3.org/2000/svg">
            <path fill="currentColor" fill-opacity="1" d="M0,256L48,229.3C96,203,192,149,288,154.7C384,160,480,224,576,218.7C672,213,768,139,864,128C960,117,1056,171,1152,197.3C1248,224,1344,224,1392,224L1440,224L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
        </svg>
    </div>


    <!-- MODAL MAKAN (Dynamic Title) -->
    <div id="modal-meal" class="fixed inset-0 z-50 flex items-end sm:items-center justify-center pointer-events-none opacity-0 transition-opacity duration-300">
        <div class="absolute inset-0 bg-brand-900/60 backdrop-blur-sm transition-opacity" onclick="closeModal('meal')"></div>
        <div id="modal-card-meal" class="bg-white w-full max-w-lg rounded-t-[2rem] sm:rounded-[2rem] p-6 relative transform translate-y-full sm:translate-y-10 transition-transform duration-300 pointer-events-auto h-[90vh] sm:h-auto overflow-y-auto">
            
            <div class="w-12 h-1.5 bg-slate-200 rounded-full mx-auto mb-6"></div>
            
            <h3 id="meal-title" class="text-2xl font-bold text-center text-slate-800 mb-1">Makan Pagi</h3>
            <p class="text-center text-slate-400 text-sm mb-6">Centang 4 unsur gizi di piringmu.</p>

            <!-- 4 UNSUR (GRID) -->
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-6">
                <!-- Karbo -->
                <div class="food-card bg-white border-2 border-slate-100 rounded-2xl p-4 cursor-pointer group" onclick="toggleCard(this, 'karbo')">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center gap-3">
                            <i class="ph ph-bowl-food text-orange-500 text-2xl"></i>
                            <span class="font-bold text-slate-700">Karbohidrat</span>
                        </div>
                        <div class="check-circle w-6 h-6 rounded-full border-2 border-slate-200 flex items-center justify-center"><i class="ph ph-check font-bold text-xs"></i></div>
                    </div>
                    <div class="input-group">
                        <input type="text" id="input-karbo" placeholder="Nasi / Roti..." class="w-full text-sm px-3 py-2 bg-slate-50 border rounded-lg" onclick="event.stopPropagation()">
                    </div>
                </div>
                <!-- Protein -->
                <div class="food-card bg-white border-2 border-slate-100 rounded-2xl p-4 cursor-pointer group" onclick="toggleCard(this, 'lauk')">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center gap-3">
                            <i class="ph ph-fish-simple text-red-500 text-2xl"></i>
                            <span class="font-bold text-slate-700">Lauk Pauk</span>
                        </div>
                        <div class="check-circle w-6 h-6 rounded-full border-2 border-slate-200 flex items-center justify-center"><i class="ph ph-check font-bold text-xs"></i></div>
                    </div>
                    <div class="input-group">
                        <input type="text" id="input-lauk" placeholder="Ayam / Ikan..." class="w-full text-sm px-3 py-2 bg-slate-50 border rounded-lg" onclick="event.stopPropagation()">
                    </div>
                </div>
                <!-- Sayur -->
                <div class="food-card bg-white border-2 border-slate-100 rounded-2xl p-4 cursor-pointer group" onclick="toggleCard(this, 'sayur')">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center gap-3">
                            <i class="ph ph-carrot text-green-500 text-2xl"></i>
                            <span class="font-bold text-slate-700">Sayuran</span>
                        </div>
                        <div class="check-circle w-6 h-6 rounded-full border-2 border-slate-200 flex items-center justify-center"><i class="ph ph-check font-bold text-xs"></i></div>
                    </div>
                    <div class="input-group">
                        <input type="text" id="input-sayur" placeholder="Bayam / Sop..." class="w-full text-sm px-3 py-2 bg-slate-50 border rounded-lg" onclick="event.stopPropagation()">
                    </div>
                </div>
                <!-- Buah -->
                <div class="food-card bg-white border-2 border-slate-100 rounded-2xl p-4 cursor-pointer group" onclick="toggleCard(this, 'buah')">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center gap-3">
                            <i class="ph ph-apple-logo text-rose-500 text-2xl"></i>
                            <span class="font-bold text-slate-700">Buah</span>
                        </div>
                        <div class="check-circle w-6 h-6 rounded-full border-2 border-slate-200 flex items-center justify-center"><i class="ph ph-check font-bold text-xs"></i></div>
                    </div>
                    <div class="input-group">
                        <input type="text" id="input-buah" placeholder="Pisang / Jeruk..." class="w-full text-sm px-3 py-2 bg-slate-50 border rounded-lg" onclick="event.stopPropagation()">
                    </div>
                </div>
            </div>

            <button onclick="saveMeal()" class="w-full py-4 bg-brand-500 text-white font-bold rounded-xl shadow-lg active:scale-95 transition">
                Simpan Jurnal Makan
            </button>
        </div>
    </div>


    <!-- MODAL AIR MINUM (8 Gelas) -->
    <div id="modal-water" class="fixed inset-0 z-50 flex items-end sm:items-center justify-center pointer-events-none opacity-0 transition-opacity duration-300">
        <div class="absolute inset-0 bg-blue-900/60 backdrop-blur-sm transition-opacity" onclick="closeModal('water')"></div>
        <div id="modal-card-water" class="bg-white w-full max-w-sm rounded-t-[2rem] sm:rounded-[2rem] p-8 relative transform translate-y-full sm:translate-y-10 transition-transform duration-300 pointer-events-auto text-center">
            
            <div class="w-12 h-1.5 bg-slate-200 rounded-full mx-auto mb-6"></div>
            
            <div class="w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-4 text-blue-500 text-3xl">
                <i class="ph ph-drop-fill"></i>
            </div>
            <h3 class="text-2xl font-bold text-slate-800">Target Air Minum</h3>
            <p class="text-slate-500 text-sm mb-6">Klik gelas untuk mengisi air.</p>

            <!-- 8 GELAS GRID -->
            <div class="grid grid-cols-4 gap-4 mb-8">
                <!-- Generate 8 glasses -->
                <div onclick="toggleGlass(0)" class="water-glass cursor-pointer w-14 h-16 border-2 border-slate-300 rounded-b-2xl rounded-t-sm flex items-center justify-center hover:border-blue-400 group" id="glass-0">
                    <div class="water-fill"></div>
                    <i class="ph ph-brandy text-2xl text-slate-300 transition-colors z-10 relative"></i>
                </div>
                <div onclick="toggleGlass(1)" class="water-glass cursor-pointer w-14 h-16 border-2 border-slate-300 rounded-b-2xl rounded-t-sm flex items-center justify-center hover:border-blue-400 group" id="glass-1">
                    <div class="water-fill"></div>
                    <i class="ph ph-brandy text-2xl text-slate-300 transition-colors z-10 relative"></i>
                </div>
                <div onclick="toggleGlass(2)" class="water-glass cursor-pointer w-14 h-16 border-2 border-slate-300 rounded-b-2xl rounded-t-sm flex items-center justify-center hover:border-blue-400 group" id="glass-2">
                    <div class="water-fill"></div>
                    <i class="ph ph-brandy text-2xl text-slate-300 transition-colors z-10 relative"></i>
                </div>
                <div onclick="toggleGlass(3)" class="water-glass cursor-pointer w-14 h-16 border-2 border-slate-300 rounded-b-2xl rounded-t-sm flex items-center justify-center hover:border-blue-400 group" id="glass-3">
                    <div class="water-fill"></div>
                    <i class="ph ph-brandy text-2xl text-slate-300 transition-colors z-10 relative"></i>
                </div>
                <div onclick="toggleGlass(4)" class="water-glass cursor-pointer w-14 h-16 border-2 border-slate-300 rounded-b-2xl rounded-t-sm flex items-center justify-center hover:border-blue-400 group" id="glass-4">
                    <div class="water-fill"></div>
                    <i class="ph ph-brandy text-2xl text-slate-300 transition-colors z-10 relative"></i>
                </div>
                <div onclick="toggleGlass(5)" class="water-glass cursor-pointer w-14 h-16 border-2 border-slate-300 rounded-b-2xl rounded-t-sm flex items-center justify-center hover:border-blue-400 group" id="glass-5">
                    <div class="water-fill"></div>
                    <i class="ph ph-brandy text-2xl text-slate-300 transition-colors z-10 relative"></i>
                </div>
                <div onclick="toggleGlass(6)" class="water-glass cursor-pointer w-14 h-16 border-2 border-slate-300 rounded-b-2xl rounded-t-sm flex items-center justify-center hover:border-blue-400 group" id="glass-6">
                    <div class="water-fill"></div>
                    <i class="ph ph-brandy text-2xl text-slate-300 transition-colors z-10 relative"></i>
                </div>
                <div onclick="toggleGlass(7)" class="water-glass cursor-pointer w-14 h-16 border-2 border-slate-300 rounded-b-2xl rounded-t-sm flex items-center justify-center hover:border-blue-400 group" id="glass-7">
                    <div class="water-fill"></div>
                    <i class="ph ph-brandy text-2xl text-slate-300 transition-colors z-10 relative"></i>
                </div>
            </div>

            <p class="text-xs font-bold text-brand-600 mb-6">Terisi: <span id="water-count">0</span> / 8 Gelas</p>

            <button onclick="closeModal('water')" class="w-full py-3 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-slate-200 transition">
                Tutup
            </button>
        </div>
    </div>


    <script>
        // --- MODAL LOGIC ---
        
        function openMealModal(title) {
            document.getElementById('meal-title').innerText = title;
            const modal = document.getElementById('modal-meal');
            const card = document.getElementById('modal-card-meal');
            modal.classList.remove('pointer-events-none', 'opacity-0');
            setTimeout(() => {
                card.classList.remove('translate-y-full', 'sm:translate-y-10');
            }, 10);
        }

        function openWaterModal() {
            const modal = document.getElementById('modal-water');
            const card = document.getElementById('modal-card-water');
            modal.classList.remove('pointer-events-none', 'opacity-0');
            setTimeout(() => {
                card.classList.remove('translate-y-full', 'sm:translate-y-10');
            }, 10);
        }

        function closeModal(type) {
            const modal = document.getElementById(`modal-${type}`);
            const card = document.getElementById(`modal-card-${type}`);
            card.classList.add('translate-y-full', 'sm:translate-y-10');
            setTimeout(() => {
                modal.classList.add('pointer-events-none', 'opacity-0');
            }, 300);
        }

        // --- FOOD LOGIC ---
        function toggleCard(card, type) {
            card.classList.toggle('active');
            if(card.classList.contains('active')) {
                setTimeout(() => {
                    const input = document.getElementById(`input-${type}`);
                    if(input) input.focus();
                }, 400);
            }
        }

        function saveMeal() {
            // Confetti
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#0ea5e9', '#fbbf24', '#f43f5e']
            });
            closeModal('meal');
        }

        // --- WATER LOGIC ---
        function toggleGlass(index) {
            const glass = document.getElementById(`glass-${index}`);
            glass.classList.toggle('filled');
            
            // Recount
            const filled = document.querySelectorAll('.water-glass.filled').length;
            document.getElementById('water-count').innerText = filled;
        }
    </script>
</body>
</html>